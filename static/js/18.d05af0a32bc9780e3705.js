webpackJsonp([18],{"2zaj":function(t,i){},WfXZ:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Gu7T"),a=e.n(s),l=e("mw3O"),o=e.n(l),n=e("D5Nr"),d=e("UFml"),c=e("xT6B"),r=e.n(c),u={name:"newsList",components:{HomeTop:n.a,publicTop:d.a},data:function(){return{checkIndex:1,ir:0,list:[],tabList:[],bgc:this.GLOBAL.bgc,allL:[8,9,7,6,3,1,0],loading:!1,finished:!1,loading1:!1,finished1:!1,activeName:"",activeId:"",pageNo:1,subList:[],pageNo1:1,subList1:[],isVideo:"",isNew:"",pIdNews:""}},beforeRouteEnter:function(t,i,e){console.log(t,"to",i,"from"),"/newsDetail"==i.path||"/videoDetail"==i.path?t.meta.keepAlive=!0:t.meta.keepAlive=!1,e()},beforeRouteLeave:function(t,i,e){"/newsDetail"==t.path||"/videoDetail"==t.path?this.$store.commit("GET_CATCHE_COMPONENTS",["newsList"]):(this.$store.commit("GET_CATCHE_COMPONENTS",[]),sessionStorage.setItem("name","")),e()},activated:function(){console.log("触发")},methods:{goTab:function(t,i){this.ir=t,this.activeId=i.id,this.pageNo=1,this.subList=[],this.pageNo1=1,this.subList1=[],this.isVideo="",this.isNew="",this.finished=!1,this.finished1=!1,"article"==i.module?this.getSublist():this.getVideoList(),this.$router.push({path:"/newsList",query:{id:this.activeId}})},goDetailN:function(t){this.$router.push({path:"/newsDetail",query:{id:t}})},goDetailV:function(t){this.$router.push({path:"/videoDetail",query:{id:t}})},kh:function(){var t=this,i={type:"mobile"};console.log(i),t.$axios.post("/f/ajaxHome/ajax_categoryMapList",o.a.stringify(i)).then(function(i){if(console.log(i,"数据list"),1==i.data.state&&(i.data.data&&0!=i.data.data.length&&(t.tabList=i.data.data),0!=i.data.data.length))if(""==t.pIdNews)t.activeId=i.data.data[0].id,"article"==i.data.data[0].module?t.getSublist():t.getVideoList();else for(var e=0;e<i.data.data.length;e++)i.data.data[e].id==t.pIdNews&&(t.activeId=i.data.data[e].id,t.ir=e,"article"==i.data.data[e].module?t.getSublist():t.getVideoList())}).catch(function(t){console.log("获取失败")})},getSublist:function(){var t=this;this.loading=!0;var i={categoryId:this.activeId,pageNo:this.pageNo,pageSize:10};console.log(i),this.$axios.post("/f/newsCenter/ajax_list",o.a.stringify(i)).then(function(i){if(console.log(i,"子列表"),1==i.data.state){if(t.loading=!1,t.pageNo<=i.data.object.newsPage.totalPage){if(++t.pageNo,i.data.object.newsPage.list&&0!=i.data.object.newsPage.list.length){var e=[];i.data.object.newsPage.list.forEach(function(t){var i={type:0,hits:t.hits,title:t.title,releaseDate:t.releaseDate.slice(0,10),publisher:t.publisher,id:t.id};e.push(i)}),t.subList=[].concat(a()(t.subList),e),console.log(t.subList,"888")}}else t.finished=!0;0==t.subList.length&&(t.subList=[],t.isNew=9)}else t.subList=[],t.isNew=9}).catch(function(t){console.log("获取失败")})},getVideoList:function(){var t=this;this.loading1=!0;var i={categoryId:this.activeId,pageNo:this.pageNo1,pageSize:10};console.log(i),this.$axios.post("/f/newsCenter/ajax_movie_list",o.a.stringify(i)).then(function(i){if(console.log(i,"子列表video"),1==i.data.state){if(t.loading1=!1,t.pageNo1<=i.data.data.page.totalPage){if(++t.pageNo1,i.data.data.page.list&&0!=i.data.data.page.list.length){var e=[];i.data.data.page.list.forEach(function(t){var i={type:1,hits:t.hits,title:t.title,releaseDate:r.a.formatTimeTwo(t.releaseDate/1e3,"Y-M-D").slice(0,10),url:t.url,id:t.id,videoSrc:t.videoSrc,imageSrc:t.imageSrc,publisher:t.publisher,movielen:t.movielen};e.push(i)}),t.subList1=[].concat(a()(t.subList1),e),console.log(t.subList1,"88833333")}}else t.finished1=!0;0==t.subList1.length&&(t.subList1=[],t.isVideo=9)}else t.subList1=[],t.isVideo=9}).catch(function(t){console.log("获取失败")})}},created:function(){console.log(this.$route.query.id,JSON.parse(localStorage.getItem("LIST4")),22),this.pIdNews=this.$route.query.id,console.log(this.pIdNews,"this.pIdNews"),this.kh()},mounted:function(){},beforeDestory:function(){},destroyed:function(){}},h={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"con"},[s("publicTop"),t._v(" "),s("div",{staticClass:"home-tabs"},[s("div",{staticClass:"home-tabs-all"},t._l(t.tabList,function(i,e){return s("div",{key:e,staticClass:"home-tabs-li",class:t.ir==e?"home-tabs-li-active":"",on:{click:function(s){return t.goTab(e,i)}}},[s("div",{staticClass:"home-tabs-li-text"},[t._v(t._s(i.name))])])}),0)]),t._v(" "),0!=t.subList.length?s("div",{staticClass:"list-all"},[s("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"没有更多了","loading-text":"下拉查看全部"},on:{load:t.getSublist},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.subList,function(i,e){return s("div",{key:e,staticClass:"list-all-li",on:{click:function(e){return t.goDetailN(i.id)}}},[s("div",{staticClass:"list-all-li-top"},[t._v("\n          "+t._s(i.title)+"\n        ")]),t._v(" "),s("div",{staticClass:"list-all-li-end"},[s("div",{staticClass:"list-all-li-end-l"},[t._v("\n            来源于"+t._s(i.publisher)+"\n            "),s("span",[t._v(t._s(i.hits)+"次浏览数")])]),t._v(" "),s("div",{staticClass:"list-all-li-end-r"},[t._v(t._s(i.releaseDate))])])])}),0)],1):t._e(),t._v(" "),0!=t.subList1.length?s("div",{staticClass:"list-all"},[s("van-list",{attrs:{"immediate-check":!1,finished:t.finished1,"finished-text":"没有更多了","loading-text":"下拉查看全部"},on:{load:t.getVideoList},model:{value:t.loading1,callback:function(i){t.loading1=i},expression:"loading1"}},t._l(t.subList1,function(i,e){return s("div",{key:e,staticClass:"list-all-li",on:{click:function(e){return t.goDetailV(i.id)}}},[s("div",{staticClass:"list-all-li-tt"},[s("div",{staticClass:"list-all-li-tt-l"},[t._v("\n            "+t._s(i.title)+"\n          ")]),t._v(" "),s("div",{staticClass:"list-all-li-tt-r"},[i.movielen?s("div",{staticClass:"list-all-li-tt-r-ab"},[t._v("\n              "+t._s(i.movielen)+"\n            ")]):t._e(),t._v(" "),s("img",{attrs:{src:i.imageSrc,alt:""}})])]),t._v(" "),s("div",{staticClass:"list-all-li-end"},[s("div",{staticClass:"list-all-li-end-l"},[t._v("\n            来源于"+t._s(i.publisher)+"\n            "),s("span",[t._v(t._s(i.hits)+"次浏览数")])]),t._v(" "),s("div",{staticClass:"list-all-li-end-r"},[t._v(t._s(i.releaseDate))])])])}),0)],1):t._e(),t._v(" "),9==t.isVideo||9==t.isNew?s("div",{staticClass:"list-all-no"},[s("img",{staticClass:"list-all-no-img",attrs:{src:e("nt0a"),alt:""}}),t._v(" "),s("div",{staticClass:"list-all-no-text"},[t._v("暂无数据")])]):t._e(),t._v(" "),s("HomeTop",{attrs:{i:t.checkIndex}})],1)},staticRenderFns:[]};var g=e("VU/8")(u,h,!1,function(t){e("2zaj")},"data-v-52aff6b4",null);i.default=g.exports}});
//# sourceMappingURL=18.d05af0a32bc9780e3705.js.map